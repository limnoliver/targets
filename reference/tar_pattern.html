<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Emulate dynamic branching. — tar_pattern • targets</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Emulate dynamic branching. — tar_pattern" />
<meta property="og:description" content="Emulate the dynamic branching process outside a pipeline.
tar_pattern() can help you understand the overall branching structure
that comes from the pattern argument of tar_target()." />
<meta property="og:image" content="/logo.svg" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">targets</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9003</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Functions</a>
</li>
<li>
  <a href="https://wlandau.github.io/targets-manual">Manual</a>
</li>
<li>
  <a href="../articles/index.html">Vignettes</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/wlandau/targets">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Emulate dynamic branching.</h1>
    <small class="dont-index">Source: <a href='https://github.com/wlandau/targets/blob/master/R/tar_pattern.R'><code>R/tar_pattern.R</code></a></small>
    <div class="hidden name"><code>tar_pattern.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Emulate the dynamic branching process outside a pipeline.
<code>tar_pattern()</code> can help you understand the overall branching structure
that comes from the <code>pattern</code> argument of <code><a href='tar_target.html'>tar_target()</a></code>.</p>
    </div>

    <pre class="usage"><span class='fu'>tar_pattern</span><span class='op'>(</span><span class='va'>pattern</span>, <span class='va'>...</span>, seed <span class='op'>=</span> <span class='fl'>0L</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>pattern</th>
      <td><p>Function call with the pattern specification.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Named integers, each of length 1.
Each name is the name of a dependency target,
and each integer is the length of the target
(number of branches or slices). Names must be unique.</p></td>
    </tr>
    <tr>
      <th>seed</th>
      <td><p>Integer of length 1, random number generator seed to
emulate the pattern reproducibly. (The <code>sample()</code> pattern is random).
In a real pipeline, the seed is automatically generated
from the target name in deterministic fashion.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A <code>tibble</code> showing the kinds of dynamic branches that
<code><a href='tar_target.html'>tar_target()</a></code> would create in a real pipeline with the given <code>pattern</code>.
Each row is a dynamic branch, each column is a dependency target,
and each element is the name of an upstream bud or branch that the
downstream branch depends on. Buds are pieces of non-branching targets
("stems") and branches are pieces of patterns. The returned bud and branch
names are not the actual ones you will see when you run the pipeline,
but they do communicate the branching structure of the pattern.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Dynamic branching is a way to programmatically
create multiple new targets based on the values of other targets,
all while the pipeline is running. Use the <code>pattern</code> argument of
<code><a href='tar_target.html'>tar_target()</a></code> to get started. <code>pattern</code> accepts a function call
composed of target names and any of the following patterns:</p><ul>
<li><p><code>map()</code>: iterate over one or more targets in sequence.</p></li>
<li><p><code>cross()</code>: iterate over combinations of slices of targets.</p></li>
<li><p><code>head()</code>: restrict branching to the first few elements.</p></li>
<li><p><code>tail()</code>: restrict branching to the last few elements.</p></li>
<li><p><code>sample()</code>: restrict branching to a random subset of elements.</p></li>
</ul>


    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># To use dynamic map for real in a pipeline,</span>
<span class='co'># call map() in a target's pattern.</span>
<span class='co'># The following code goes at the bottom of _targets.R.</span>
<span class='fu'><a href='tar_pipeline.html'>tar_pipeline</a></span><span class='op'>(</span>
  <span class='fu'><a href='tar_target.html'>tar_target</a></span><span class='op'>(</span><span class='va'>x</span>, <span class='fu'><a href='https://rdrr.io/r/base/seq.html'>seq_len</a></span><span class='op'>(</span><span class='fl'>2</span><span class='op'>)</span><span class='op'>)</span>,
  <span class='fu'><a href='tar_target.html'>tar_target</a></span><span class='op'>(</span><span class='va'>y</span>, <span class='fu'>head</span><span class='op'>(</span><span class='va'>letters</span>, <span class='fl'>2</span><span class='op'>)</span><span class='op'>)</span>,
  <span class='fu'><a href='tar_target.html'>tar_target</a></span><span class='op'>(</span><span class='va'>dynamic</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='va'>x</span>, <span class='va'>y</span><span class='op'>)</span>, pattern <span class='op'>=</span> <span class='fu'>map</span><span class='op'>(</span><span class='va'>x</span>, <span class='va'>y</span><span class='op'>)</span><span class='op'>)</span> <span class='co'># 2 branches</span>
<span class='op'>)</span>
</div><div class='output co'>#&gt; &lt;pipeline with 3 targets&gt;</div><div class='input'><span class='co'># Likewise for more complicated patterns.</span>
<span class='fu'><a href='tar_pipeline.html'>tar_pipeline</a></span><span class='op'>(</span>
  <span class='fu'><a href='tar_target.html'>tar_target</a></span><span class='op'>(</span><span class='va'>x</span>, <span class='fu'><a href='https://rdrr.io/r/base/seq.html'>seq_len</a></span><span class='op'>(</span><span class='fl'>2</span><span class='op'>)</span><span class='op'>)</span>,
  <span class='fu'><a href='tar_target.html'>tar_target</a></span><span class='op'>(</span><span class='va'>y</span>, <span class='fu'>head</span><span class='op'>(</span><span class='va'>letters</span>, <span class='fl'>2</span><span class='op'>)</span><span class='op'>)</span>,
  <span class='fu'><a href='tar_target.html'>tar_target</a></span><span class='op'>(</span><span class='va'>z</span>, <span class='fu'>head</span><span class='op'>(</span><span class='va'>LETTERS</span>, <span class='fl'>2</span><span class='op'>)</span><span class='op'>)</span>,
  <span class='fu'><a href='tar_target.html'>tar_target</a></span><span class='op'>(</span><span class='va'>dynamic</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='va'>x</span>, <span class='va'>y</span>, <span class='va'>z</span><span class='op'>)</span>, pattern <span class='op'>=</span> <span class='fu'>cross</span><span class='op'>(</span><span class='va'>z</span>, <span class='fu'>map</span><span class='op'>(</span><span class='va'>x</span>, <span class='va'>y</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span> <span class='co'>#4 branches</span>
<span class='op'>)</span>
</div><div class='output co'>#&gt; &lt;pipeline with 4 targets&gt;</div><div class='input'><span class='co'># But you can emulate dynamic branching without running a pipeline</span>
<span class='co'># in order to understand the patterns you are creating. Simply supply</span>
<span class='co'># the pattern and the length of each dependency target.</span>
<span class='co'># The returned data frame represents the branching structure of the pattern:</span>
<span class='co'># One row per new branch, one column per dependency target, and</span>
<span class='co'># one element per bud/branch in each dependency target.</span>
<span class='fu'>tar_pattern</span><span class='op'>(</span>
  <span class='fu'>cross</span><span class='op'>(</span><span class='va'>x</span>, <span class='fu'>map</span><span class='op'>(</span><span class='va'>y</span>, <span class='va'>z</span><span class='op'>)</span><span class='op'>)</span>,
  x <span class='op'>=</span> <span class='fl'>2</span>,
  y <span class='op'>=</span> <span class='fl'>3</span>,
  z <span class='op'>=</span> <span class='fl'>3</span>
<span class='op'>)</span>
</div><div class='output co'>#&gt; <span style='color: #555555;'># A tibble: 6 x 3</span><span>
#&gt;   x     y     z    
#&gt;   </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span>
#&gt; </span><span style='color: #555555;'>1</span><span> x_1   y_1   z_1  
#&gt; </span><span style='color: #555555;'>2</span><span> x_1   y_2   z_2  
#&gt; </span><span style='color: #555555;'>3</span><span> x_1   y_3   z_3  
#&gt; </span><span style='color: #555555;'>4</span><span> x_2   y_1   z_1  
#&gt; </span><span style='color: #555555;'>5</span><span> x_2   y_2   z_2  
#&gt; </span><span style='color: #555555;'>6</span><span> x_2   y_3   z_3  </div><div class='input'><span class='fu'>tar_pattern</span><span class='op'>(</span>
  <span class='fu'>head</span><span class='op'>(</span><span class='fu'>cross</span><span class='op'>(</span><span class='va'>x</span>, <span class='fu'>map</span><span class='op'>(</span><span class='va'>y</span>, <span class='va'>z</span><span class='op'>)</span><span class='op'>)</span>, n <span class='op'>=</span> <span class='fl'>2</span><span class='op'>)</span>,
  x <span class='op'>=</span> <span class='fl'>2</span>,
  y <span class='op'>=</span> <span class='fl'>3</span>,
  z <span class='op'>=</span> <span class='fl'>3</span>
<span class='op'>)</span>
</div><div class='output co'>#&gt; </span><span style='color: #555555;'># A tibble: 2 x 3</span><span>
#&gt;   x     y     z    
#&gt;   </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span>
#&gt; </span><span style='color: #555555;'>1</span><span> x_1   y_1   z_1  
#&gt; </span><span style='color: #555555;'>2</span><span> x_1   y_2   z_2  </div></span></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by William Michael Landau.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.9000.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


