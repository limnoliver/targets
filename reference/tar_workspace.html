<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Load a saved workspace and seed for debugging. — tar_workspace • targets</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Load a saved workspace and seed for debugging. — tar_workspace" />
<meta property="og:description" content="Load the packages, workspace, and random number generator seed
of an errored target attempted with error = &quot;save&quot;.
Remove workspace files with tar_undebug() when you are done debugging." />
<meta property="og:image" content="/logo.svg" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">targets</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9001</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Functions</a>
</li>
<li>
  <a href="https://wlandau.github.io/targets-manual">Manual</a>
</li>
<li>
  <a href="../articles/index.html">Vignettes</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/wlandau/targets">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Load a saved workspace and seed for debugging.</h1>
    <small class="dont-index">Source: <a href='https://github.com/wlandau/targets/blob/master/R/tar_workspace.R'><code>R/tar_workspace.R</code></a></small>
    <div class="hidden name"><code>tar_workspace.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Load the packages, workspace, and random number generator seed
of an errored target attempted with <code>error = "save"</code>.
Remove workspace files with <code><a href='tar_undebug.html'>tar_undebug()</a></code> when you are done debugging.</p>
    </div>

    <pre class="usage"><span class='fu'>tar_workspace</span><span class='op'>(</span><span class='va'>name</span>, envir <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/sys.parent.html'>parent.frame</a></span><span class='op'>(</span><span class='op'>)</span>, packages <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>name</th>
      <td><p>Symbol, name of the target whose workspace to read.</p></td>
    </tr>
    <tr>
      <th>envir</th>
      <td><p>Environment in which to put the objects.</p></td>
    </tr>
    <tr>
      <th>packages</th>
      <td><p>Logical, whether to load the required packages
of the target. Uses <code><a href='https://rdrr.io/r/base/library.html'>require()</a></code> with <code>lib.loc</code> equal to
the <code>library</code> setting of the target
(from <code><a href='tar_target.html'>tar_target(library = "PATH_TO_LIB")</a></code> or
<code><a href='tar_option_set.html'>tar_option_set(library = "PATH_TO_LIB")</a></code>).</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>the function returns no value, but it does load
the target's required packages, as well as multiple objects
into the environment (<code>envir</code> argument) in order to replicate the
workspace where the error happened. These objects include
the global objects at the time <code><a href='tar_make.html'>tar_make()</a></code> was called, the
dependency targets, the random number generator seed
(assigned to <code>.targets$seed</code> and set with <code><a href='https://rdrr.io/r/base/Random.html'>set.seed()</a></code>)
and the traceback of the error (assigned to <code>.targets$traceback</code>).</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>If you set <code>error = "save"</code> in <code><a href='tar_option_set.html'>tar_option_set()</a></code>
or <code><a href='tar_target.html'>tar_target()</a></code>, then if that target throws an error
in <code><a href='tar_make.html'>tar_make()</a></code>, it will save its workspace to a compressed file
in <code>_targets/workspaces/</code>. The workspace includes the
target's required packages, the
global objects at the time <code><a href='tar_make.html'>tar_make()</a></code> was called, the
dependency targets, the random number generator seed
(assigned to <code>.targets$seed</code> and set with <code><a href='https://rdrr.io/r/base/Random.html'>set.seed()</a></code>)
and the traceback of the error (assigned to <code>.targets$traceback</code>).
<code>tar_workspace()</code> loads the packages, populates the environment
with the objects, and sets the seed to the seed of the target.
Workspace files can be large sometimes, so it is good practice to
remove them with <code><a href='tar_undebug.html'>tar_undebug()</a></code> when you are done debugging.</p>
<p>Although useful, this behavior does not perfectly replicate
what <code><a href='tar_make.html'>tar_make()</a></code> does to set up the runtime environment
for a target. <code><a href='tar_make.html'>tar_make()</a></code> creates a formal hierarchy of
environments that inherit from one another in order to
organize data and contain side effects.</p>
<p>In addition, sometimes, you may not be able to debug with
<code>error = "save"</code>. Workspace files are saved with <code><a href='https://rdrr.io/pkg/qs/man/qsave.html'>qs::qsave()</a></code>,
so if one of your dependencies cannot be properly serialized this way
(e.g. Keras models you store with <code>format = "keras"</code>)
then the workspace cannot be saved properly. If this happens to you,
either avoid non-exportable objects or use interactive debugging.
(See the <code>debug</code> argument of <code><a href='tar_option_set.html'>tar_option_set()</a></code>.)</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='kw'>if</span> <span class='op'>(</span><span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>{</span>
<span class='va'>tmp</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/sample.html'>sample</a></span><span class='op'>(</span><span class='fl'>1</span><span class='op'>)</span>
<span class='fu'><a href='tar_script.html'>tar_script</a></span><span class='op'>(</span><span class='op'>{</span>
  <span class='fu'><a href='tar_option_set.html'>tar_option_set</a></span><span class='op'>(</span>error <span class='op'>=</span> <span class='st'>"save"</span><span class='op'>)</span> <span class='co'># Required for saving workspaces.</span>
  <span class='fu'><a href='tar_pipeline.html'>tar_pipeline</a></span><span class='op'>(</span>
    <span class='fu'><a href='tar_target.html'>tar_target</a></span><span class='op'>(</span><span class='va'>x</span>, <span class='st'>"loaded"</span><span class='op'>)</span>,
    <span class='fu'><a href='tar_target.html'>tar_target</a></span><span class='op'>(</span><span class='va'>y</span>, <span class='kw'><a href='https://rdrr.io/r/base/stop.html'>stop</a></span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span><span class='op'>)</span>
  <span class='op'>)</span>
<span class='op'>}</span><span class='op'>)</span>
<span class='kw'><a href='https://rdrr.io/r/base/try.html'>try</a></span><span class='op'>(</span><span class='fu'><a href='tar_make.html'>tar_make</a></span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/exists.html'>exists</a></span><span class='op'>(</span><span class='st'>"x"</span><span class='op'>)</span> <span class='co'># Should be FALSE.</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>tail</a></span><span class='op'>(</span><span class='va'>.Random.seed</span><span class='op'>)</span>
<span class='fu'>tar_workspace</span><span class='op'>(</span><span class='va'>y</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/exists.html'>exists</a></span><span class='op'>(</span><span class='st'>"x"</span><span class='op'>)</span> <span class='co'># Should be TRUE.</span>
<span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span> <span class='co'># "loaded"</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>tail</a></span><span class='op'>(</span><span class='va'>.Random.seed</span><span class='op'>)</span> <span class='co'># Should be different.</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>tail</a></span><span class='op'>(</span><span class='va'>.targets</span><span class='op'>$</span><span class='va'>traceback</span>, <span class='fl'>1</span><span class='op'>)</span>
<span class='op'>}</span>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by William Michael Landau.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.9000.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


